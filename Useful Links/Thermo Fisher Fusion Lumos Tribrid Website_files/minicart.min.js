function MiniCart(){function isNotEmpty(t){for(var i in t)return!0;return!1}this.itemList=[],this.itemLine=[],this.cartKey="",this.cartSubTotal="",this.jsessionid="",this.error="",this.hasError=!1,this.visible=!1,this.cartName="",this.numberOfItems=0,this.currencySymbol="",this.subscriptionTotalPrice="",this.productTotalPrice="",this.totalQuantity="",this.isAnonymous="",this.totalItems=function(){return this.totalQuantity},this.addItem=function(t){this.itemList||(this.itemList=[]);var i=new MiniCartItem(t);this.itemList.push(i)},this.addLineKey=function(t,i,e,a,n,r,s,o,l,c,d,u,m,h,p,f,g){var v=new MiniCartLine(t,i,e,a,n,r,s,o,l,c,d,u,m,h,p,f,g);this.itemLine.push(v)},this.setCartName=function(t){null!=t&&(compareCookieValueToJSON(t,this.cartName)||(this.cartName=t))},this.setCurrency=function(t){null!=t&&(compareCookieValueToJSON(t,this.currencySymbol)||(this.currencySymbol=t))},this.setcartSubtotal=function(t){null!=t&&(compareCookieValueToJSON(t,this.cartSubTotal)||(this.cartSubTotal=t))},this.setProductTotalPrice=function(t){null!=t&&(this.productTotalPrice=t)},this.setSessionValues=function(t){null!=t&&(compareCookieValueToJSON(t,this.jsessionid)||(this.jsessionid=t))},this.setNumberOfItems=function(t){null!=t&&(compareCookieValueToJSON(t,this.totalQuantity)||(this.totalQuantity=t))},this.JSONToMiniCart=function(json){if(isNotEmpty(json)){this.loaded=!0;var obj=eval(json);this.setNumberOfItems(obj.totalQuantity),this.cartName=obj.cartName||"Cart",null!=obj.subTotal&&""!=obj.subTotal&&(this.cartSubTotal=obj.subTotal),obj.isAnonymous&&(this.isAnonymous=obj.isAnonymous),null!=obj.miniCartItems&&null!=obj.miniCartItems&&""!=obj.miniCartItems&&(this.itemList=[],$.each(obj.miniCartItems,function(t,i){miniCart.addItem(i)}))}this.hideStatus()}}function MiniCartItem(t){this.catalogNumber=t.catalogNumber,this.catalogTitle=t.catalogTitle,this.catalogUrl=t.catalogUrl,this.quantity=t.quantity,this.itemSubTotal=t.itemSubTotal,this.listPriceTotal=t.listPriceTotal,this.priceAccess=t.priceAccess,this.leadTarget=t.leadTarget,this.entitled=t.entitled,this.priceAccessLink=t.priceAccessLink}function MiniCartLine(t,i,e,a,n,r,s,o,l,c,d,u,m,h,p,f,g){for(var v in this.SKU=t,this.quantity=i,this.name=e,this.unitPrice=a,this.size=n,this.assayID=r,this.assayName=s,this.purity=o,this.scale=l,this.ratePlanId=c,this.ratePlanName=d,this.productRateChargeId=u,this.baseLineKey=m,this.baseLineSku=h,this.billingPeriod=p,this.parentLineNo=g||"",this.lineNo=f||"",this)this[v]&&"undefined"!=this[v]&&null!=this[v]||(this[v]="")}function MiniCartRequest(){this.protocol=-1!=document.location.toString().indexOf("https://")?"https:":"http:",this.host=environmentURL.COMERGENTSERVER,this.country="US",this.language="en",this.entryPoint="adirect",this.partner="lt",this.jsessionid="",this.command="IVGNCartOperations",this.operation="",this.cartKey="",this.callback=""}function CartRequest(){this.protocol=-1!=document.location.toString().indexOf("https://")?"https:":"http:",this.host=environmentURL.WCMSERVER,this.addCartApi="api/store/carts/addToCart"}function viewMiniCart(){var t=window.cartletEnabled||!1,i=window.getCookie("cartId");$.ajax({headers:{"Content-Type":"application/json","Cache-Control":"No-Cache"},url:"/api/store/carts/"+i+"/minicart",method:"GET",success:function(i){var e=i.data;t?(e.newCart=!0,miniCart.finalizeAddItemNoPopup(e)):miniCart.finalizeAddItem(e)},error:function(t){console.log("minicart view cart response not found",t),$(document).trigger("minicartError")}})}function getMiniCartDetails(){var t=window.getCookie("cartId");$.ajax({headers:{"Content-Type":"application/json","Cache-Control":"No-Cache"},url:"/api/store/carts/"+t+"/minicart",method:"GET",success:function(t){var i=t.data;miniCart.JSONToMiniCart(i),miniCart.showCart()},error:function(t){console.log("minicart view cart response not found",t),$(document).trigger("minicartError")}})}function Ominiture(){var t={events:"AddedToCart"},i=miniCart.currencySymbol;i||(i=getCookie("CK_CURRENCY_CODE")),i&&(t.currencyCode=i.toLowerCase()),-1!=document.location.toString().indexOf("/search/results")&&(t.events="AddedToCart,event14,event15"),this.url="",this.additionalOmniParameters=null,this.addProduct=function(t,i,e,a){e&&(e=parseInt(e)),e||(e=0),i?"string"==typeof i&&(i=i.replace(/\,/g,"")):i=0,this.url+=a&&"null"!==a?"assay-"+a+";"+t+";"+e+";"+i+",":"catalog product;"+t+";"+e+";"+i+","},this.cleanEndOfString=function(){this.url&&","==this.url.charAt(this.url.length-1)&&(this.url=this.url.substring(0,this.url.length-1))},this.finalize=function(i){if(t.obj=i,t.cartKey=miniCart.cartKey,t.linkType="o",t.linkName="Add To Cart",t.products=this.url,miniCart.cartKey&&0!=parseInt("0"+miniCart.totalQuantity)||(t.events+=", CreateCart"),this.additionalOmniParameters&&(this.additionalOmniParameters.event&&(t.events+=", "+this.additionalOmniParameters.event),this.additionalOmniParameters.data))for(var e in this.additionalOmniParameters.data)t[e]||(t[e]=this.additionalOmniParameters.data[e]);_lt.tracking.trackPageEvent(t)},this.finalizeGeneralAction=function(t){var i={};i.cartKey=miniCart.cartKey,i.prop66="MiniCart | "+t,i.eVar66=i.prop66,i.prop67=i.prop66,i.eVar67=i.prop66,_lt.tracking.trackPageEvent(i)}}function isUndefined(t){if(void 0===t)return!0}function nameExists(t,i){if(-1!==t.name.toLowerCase().indexOf(i.toLowerCase()))return!0}function hasValue(t){if(""!==t.value&&!isUndefined(t.value))return!0}function compareCookieValueToJSON(t,i){return t===i}function deleteCartCookies(){setCookieSessionExpire("MiniCartTotalItems","")}function isValidQuantity(t){return!(isNaN(t)||t<1)}function isICard(t){}function delayLoadCart(){miniCart.loadCart()}function displayMiniCartFetched(t){miniCart.JSONToMiniCart(t),miniCart.updateItemCountInHeader()}function displayMiniCart(t){miniCart.JSONToMiniCart(t),miniCart.updateItemCountInHeader(),miniCart.showCart()}function setEventHandlers(){$("#addToCart").click(function(){miniCart.addToCart()})}function setEventHandlersQ5(t,i){}_lt||(window._lt={}),window._lt.commerceServices=function(){"use strict";function t(t){return $("<span>"+t+"</span>").text()}function i(){this.host=environmentURL.COMERGENTSERVER,this.country="US",this.language="en",this.entryPoint="adirect",this.partner="lt",this.cmd="",this.operation="",this.callback=""}function e(t){if(t&&"object"==typeof t){var i;for(var a in i=void 0!==t.length?[]:{},t){var n=t[a];i[a]=e(n)}return i}return!1===t||t?t:""}function a(t,i){t.length||(t=[t]);for(var a=[],n=0;n<t.length;n++){var r=t[n],s={quantity:r.qty,lineNo:r.lineNo,checkForSKUCollisions:!!r.checkForSKUCollisions,lineSourceId:i,parentLineNo:r.parentLineNo,poNumber:r.poNumber,remarks:r.remarks,customerName:r.customerName,reserveNumber:r.reserveNumber,product:{sku:r.sku,productSize:r.size,description:r.description,productAttributes:{id:r.assayID,name:r.assayName,purity:r.purity,scale:r.scale,baseLineSku:r.baseLineSku,ratePlanId:r.ratePlanId,ratePlanName:r.ratePlanName,ratePlanCharges:[{id:r.productRateChargeId,billingPeriod:r.billingPeriod}]}}};s=e(s),a.push(s)}return a}function n(i,e,a){var n={isGenericMessage:!1},r="success"!==e||!i||"object"!=typeof i||"511"===i.statusCode||i.errorMessage;if(i||(i={status:"error"}),n.statusCode=i.status,n.statusDetailType=e,n.data=i,"string"==typeof a&&(n.statusDetailMessage=a),r)n.success=!1,"success"===n.statusDetailType&&(n.statusDetailType="other"),"511"===i.statusCode?(n.message=i.message,n.statusCode=511):(n.errorMessage?n.message=n.errorMessage:(n.message=t(localizedStrings.SUBMIT_ERROR_SERVER),n.isGenericMessage=!0),n.statusCode=500);else{var s=!1;if(i.lineItems&&i.lineItems.length>0)for(var o=0;o<i.lineItems.length;o++){var l=i.lineItems[o];if(l.messages&&l.messages.HEADER_MESSAGES&&l.messages.HEADER_MESSAGES.length>0)for(var c=0;c<l.messages.HEADER_MESSAGES.length;c++){var d=l.messages.HEADER_MESSAGES[c];if(s=!!d&&200!=d.code)break}if(s)break}s&&!i.currencySymbol?(n.success=!1,n.message=t(localizedStrings.MINICART_ERROR_3),n.statusDetailType="validation",n.isGenericMessage=!0):(n.success=!0,i.message?n.message=i.message:i.lineItems?(n.message=t(localizedStrings.MINICART_NOTE_1),n.isGenericMessage=!0):n.message=n.statusDetailType)}return n}function r(t,r,s){function o(t,i,e){var a=n(t,i,e);console.log("commerce call complete",a),s&&s(a)}var l=function(t,n){var r=new i,s=t.source;r.cmd=t.cmd,r.operation=t.operation,t.sessionId&&(r.jsessionid=t.sessionId),t.cartKey&&(r.cartKey=t.cartKey);var o={};r.cmd&&(o.cmd=r.cmd),r.operation&&(o.operation=r.operation),r.cartKey&&(o.cartKey=r.cartKey),$.extend(o,t.params);var l="//"+r.host+"/"+r.language+"/"+r.country+"/"+r.entryPoint+"/"+r.partner;r.jsessionid&&(l+=";jsessionid="+r.jsessionid);var c={url:l+="?"+$.param(o),method:"POST",type:"POST",dataType:"json"},d={cartKey:e(r.cartKey),lineItems:a(n,s)};return t.notJSON?c.data={JSONObject:JSON.stringify(d)}:(c.contentType="application/json; charset=utf-8",c.data=JSON.stringify(d)),c}(t,r);return l.success=o,l.error=o,$.ajax(l),!0}return{processRemoteResponse:n,convertProductsToJSON:a,addProductsToFavorites:function(t,i){r({cmd:"validateAuthentication",operation:"addToFavorites",params:{targetMessageType:"commercePodOperations",responseType:"json",productID:t[0]?t[0].sku:t.sku}},t,i)},addProductsToCart:function(t,i,e,a){r({notJSON:!0,cmd:"IVGNCartOperations",operation:"AddToCart",cartKey:e,sessionId:a},t,i)},bulkAddProductsToCart:function(t,i,e,a){r({cmd:"IVGNCartOperations",operation:"quickOrder",source:"QO",cartKey:e,sessionId:a},t,i)}}}(),function(t){var i="thermofisher.com",e=(window.location.host||window.location.hostname||"").split("thermofisher.");e.length>0&&(i="thermofisher."+e[1]),MiniCart.currentDomain=i}(),MiniCart.prototype.requestJSON=function(t){var i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.src=t,document.getElementsByTagName("head").item(0).appendChild(i)},MiniCart.prototype.loadCart=function(){miniCart.showStatus("loading"),this.loaded=!0,getMiniCartDetails()},MiniCart.prototype.forceUpdate=function(){this.refreshCartSessionID()},MiniCart.prototype.refreshCartSessionID=function(){console.log("Cookie remediation phase 2")},MiniCart.prototype.addProductsToCart=function(t,e){if(t&&"object"==typeof t){Array.isArray(t)||(t=[t]);var a,n=[],r=!1,s=new Ominiture;for(s.additionalOmniParameters=e,i=0;i<t.length;i++)(a=t[i]).qty&&isValidQuantity(a.qty)?n.push(a):r=!0;if(r||0===n.length){var o=$("<span>"+localizedStrings.MINICART_ERROR_2+"</span>").text();alert(o)}else{for(i=0;i<n.length;i++)a=n[i],miniCart.addLineKey(a.sku,a.qty,a.description,a.price,a.size,a.assayID,a.assayName,a.purity,a.scale,"","","","","",""),s.addProduct(a.sku,a.price,a.qty,a.assayID);s.cleanEndOfString(),window.cartletEnabled||!1?"finalizeAddItemNoPopup":("finalizeAddItem",this.initiateAddItem());var l,c=miniCart.MiniCartToJSON("","ADD");if($(document).trigger("addToCartBegin"),miniCart.cartRequest=c,c)try{l=JSON.parse(c)}catch(t){console.log(t)}this.newAddToCart(l),!0}}else;},MiniCart.prototype.newAddToCart=function(t){var i={cartName:"Cart",countryCode:_lt.user.displayIso,languageCode:_lt.user.displayLang,lineItems:t.lineItems},e=window.getCookie("cartId");e&&(i.cartId=e);var a=this.createNewRequestURL();$.ajax({headers:{"Content-Type":"application/json; charset=utf-8"},url:a,type:"POST",method:"POST",data:JSON.stringify(i),success:function(t){var i=t.data.cartId;document.cookie="cartId="+i+";domain=."+MiniCart.currentDomain+";path=/; Secure; SameSite=None;",viewMiniCart(!0)},error:function(t){console.log("Item not added to cart",t),$(document).trigger("minicartError")}})},MiniCart.prototype.addToCart=function(t,i){var e="";if(null!=t&&""!=t&&(e=t),this.getFormValues(e,i)){window.cartletEnabled||!1?"finalizeAddItemNoPopup":("finalizeAddItem",this.initiateAddItem());var a,n=miniCart.MiniCartToJSON("","ADD");if($(document).trigger("addToCartBegin"),miniCart.cartRequest=n,n)try{a=JSON.parse(n)}catch(t){console.log(t)}this.newAddToCart(a)}},MiniCart.prototype.addToCartAjax=function(t,i,e){if(!1===function(){return 0==MiniCart.currentDomain.indexOf("thermofisher.")})throw window.location.hostname+" is not a valid hostname";void 0===i&&(i="miniCart.finalizeAddItem");var a="";if(null!=t&&""!=t&&(a=t),this.getFormValues(a,e)){this.initiateAddItem();var n,r=miniCart.MiniCartToJSON("","ADD");if($(document).trigger("addToCartBegin"),miniCart.cartRequest=r,r)try{n=JSON.parse(r)}catch(t){console.log(t)}this.newAddToCart(n)}},MiniCart.prototype.removeItem=function(t,i){miniCart.showStatus("remove");var e=miniCart.MiniCartToJSON(i,"REMOVE"),a=this.createRequestURL("DeleteLineItems","miniCart.finalizeRemoveItem",miniCart.jsessionid,miniCart.cartKey);return a+="&JSONObject="+encodeURIComponent(e),miniCart.requestJSON(a),!1},MiniCart.prototype.requestAjax=function(url,params){$.ajax({type:"POST",url:url,data:params,success:function(json){eval(json)}})},MiniCart.prototype.createRequestURL=function(t,i,e,a){var n=new MiniCartRequest;n.operation=t,n.callback=i,n.jsessionid=""==e&&isUndefined(e)?"":e,n.cartKey=""==a&&isUndefined(a)?"":a;var r="";return r=n.protocol+"//"+n.host+"/"+n.language+"/"+n.country+"/"+n.entryPoint+"/"+n.partner,""!=n.jsessionid&&(r+=";jsessionid="+n.jsessionid),r+="?cmd="+n.command+"&operation="+n.operation,""!=n.cartKey&&(r+="&cartKey="+n.cartKey),""!=n.callback&&(r+="&callback="+n.callback),this.getIsLoggedIn()&&(r+="&li=1"),r+="&randnum="+Math.floor(999999999999*Math.random())},MiniCart.prototype.createNewRequestURL=function(){var t=new CartRequest;return t.protocol+"//"+t.host+"/"+t.addCartApi},MiniCart.prototype.MiniCartToJSON=function(t,i){return"REMOVE"==i?this.RemoveFromCartJSON(t):this.AddToCartJSON()},MiniCart.prototype.RemoveFromCartJSON=function(t){var i="{";return i+='lineKey:"'+t+'"',i="{itemList:["+(i+="}")+"]}"},MiniCart.prototype.AddToCartJSON=function(){var t="",i=miniCart.itemLine;i=i.reverse();for(var e=0;e<i.length;e++){var a=i[e],n="{";n+='"quantity":"'+a.quantity+'"',n+=',"lineNo":"'+a.lineNo+'"',n+=',"parentLineNo":"'+a.parentLineNo+'"',n+=',"product":{',n+='"sku":"'+a.SKU+'"',n+=',"productSize":"'+a.size+'"',n+=',"description":""',n+=',"productAttributes":{',n+='"id":"'+a.assayID+'"',n+=',"name":"'+a.assayName+'"',n+=',"purity":"'+a.purity+'"',n+=',"scale":"'+a.scale+'"',n+=',"baseLineSku":"'+a.baseLineSku+'"',n+=',"ratePlanId":"'+a.ratePlanId+'"',n+=',"ratePlanName":"'+a.ratePlanName+'"',n+=',"ratePlanCharges":[{',n+='"id":"'+a.productRateChargeId+'"',n+=',"billingPeriod":"'+a.billingPeriod+'"',n+="}]",n+="}",n+="}",t+=n+="},"}t=t.substring(0,t.length-1);var r='"cartKey":"';return this.cartKey&&(r+=this.cartKey),t="{"+(t=(r+='"')+',"lineItems":['+t+"]")+"}"},MiniCart.prototype.setAddToCartSuccessCallback=function(t){if("function"!=typeof t)throw"Add to cart success callback must resolve to a function";this.addToCartCallback=t},MiniCart.prototype.executeAddToCartSuccessCallback=function(t){if(window.cartletEnabled){var i={};i.cartData=t,i.cartRequest=miniCart.cartRequest,$(document).trigger("addToCartComplete",i)}"function"==typeof this.addToCartCallback&&!1===this.hasError&&this.addToCartCallback(t)},MiniCart.prototype.setLoadCartSuccessCallback=function(t){if("function"!=typeof t)throw"Load cart success callback must resolve to a function";this.loadCartCallback=t},MiniCart.prototype.executeLoadCartSuccessCallback=function(){"function"==typeof this.loadCartCallback&&!1===this.hasError&&this.loadCartCallback()},MiniCart.prototype.initiateAddItem=function(t){scroll(0,0),this.showStatus("add"),this.showCart(!0)},MiniCart.prototype.refreshCartTotals=function(){},MiniCart.prototype.showCart=function(t){if(""!==$("#miniCartHeaderTotalItems").html()){if(hideOpenHeaderPanels(),t||(t=!1),!this.loaded&&!this.status)return this.loadCart(),!1;this.visible&&t?(this.renderCartHtml(),$("#miniCart").show(),this.visible=!0,this.toggleOverlay(),this.fixScroll()):this.visible?this.hideCart():(this.totalItems()>=1||this.hasError||t)&&(this.renderCartHtml(),hideOpenHeaderPanels(),$(".minicart-toggle").addClass("active"),$("#miniCart").show(),this.visible=!0,this.toggleOverlay(),this.fixScroll())}},MiniCart.prototype.fixScroll=function(){var t=$("#minicart-items");t.length<=0||null==t||(t[0].scrollHeight>t.height()?$(t).css("margin-right","10px"):$(t).css("margin-right","15px"))},MiniCart.prototype.hideCart=function(){this.removeCloseCartOverlay(),$("#miniCart").hide(),$(".minicart-toggle").removeClass("active"),this.visible=!1,this.toggleOverlay()},MiniCart.prototype.removeCloseCartOverlay=function(){$("#minicart-overlay").remove()},MiniCart.prototype.toggleOverlay=function(){},MiniCart.prototype.showStatus=function(t){switch(t){case"add":this.statusMessage=localizedStrings.MINICART_MESSAGE_1,this.status="add";break;case"loading":this.statusMessage=localizedStrings.PROCESSING_MESSAGE,this.status="load";break;default:this.statusMessage=localizedStrings.MINICART_MESSAGE_2,this.status="remove"}this.renderStatus()},MiniCart.prototype.renderStatus=function(){this.status?($('[data-omni-action="Add to cart"]').attr("disabled",""),$('[data-omni-action="add-to-cart"]').attr("disabled",""),$(".commerce-button").attr("disabled",""),$("#minicart-error-message").hide(),this.statusMessage&&$("#minicart-spinner-string").html(this.statusMessage),$("#minicart-spinner").show()):($("#minicart-spinner").hide(),$('[data-omni-action="Add to cart"]').removeAttr("disabled"),$('[data-omni-action="add-to-cart"]').removeAttr("disabled"),$(".commerce-button").removeAttr("disabled"))},MiniCart.prototype.hideStatus=function(){this.status="",this.statusMessage="",this.renderStatus()},MiniCart.prototype.loadErrorHandler=function(){this.error=localizedStrings.MINICART_ERROR_3,this.hideStatus(),this.showCart(!0)},MiniCart.prototype.renderCartHtml=function(){var t=window.minicartTemplates["newMiniCart.html"];$("#miniCartContainer").html(t);var i=this.generateCheckoutLink();$("a#new-minicart-checkout-button").attr("href",i).html(localizedStrings.VIEW_CART),$("#minicart-added-prefix").html(localizedStrings.MINICART_CART_NAME_LABEL_1+"&nbsp;"),function(){$("#minicart-summary-header strong").html(localizedStrings.MINICART_SUMMARY);var t=miniCart.cartName;t.length>10&&(t=t.substr(0,10)+"...");$("#minicart-cart-name").html(t);var i=$("#minicart-summary-content"),e=($("#minicart-your-price"),$("#minicart-change-link")),a=miniCart.cartSubTotal;miniCart.isAnonymous?(e.html(""),$(".minicart-subtotal",i).html(localizedStrings.YOUR_PRICE),$(".minicart-sign-in",i).html("<a href='"+miniCart.signInUrl+"'>"+localizedStrings.SIGN_IN+"</a>")):(e.html(""),$(".minicart-subtotal",i).html(localizedStrings.YOUR_PRICE),$(".minicart-currency",i).html(localizedStrings.CURRENCY),$(".minicart-price",i).html(a))}(),this.updateItemCountInHeader(),this.renderCartItemsHtml()},MiniCart.prototype.renderCartItemsHtml=function(){var t=$("#minicart-items-rows");t.empty();var i=$("#minicart-items-header");$(".minicart-left-cell strong",i).html(localizedStrings.MINICART_PRODUCT),$(".minicart-middle-cell strong",i).html(localizedStrings.QUANTITY),$(".minicart-right-cell strong",i).html(localizedStrings.TOTAL),miniCart.error&&$("#minicart-error-message").html(miniCart.error).show();for(var e="",a=this.itemList,n=0;n<a.length;n++){var r=a[n];e+="<div class='minicart-row'>",e+="<div class='minicart-left-cell'>",r&&(e+="<a class='minicart-product-link' href='"+r.catalogUrl+"'>"),e+=r.catalogTitle,r&&(e+="</a>"),e+="<div>",r.catalogNumber&&(e+=localizedStrings.CATALOG_NUMBER+"&nbsp;"+r.catalogNumber),e+="</div>",e+="<div>",r.designId&&r.designId,e+="</div>",e+="</div>",e+="<div class='minicart-middle-cell'>",e+=r.quantity,e+="</div>","ORDERABLE"!=r.priceAccess||miniCart.isAnonymous||(r.listPriceTotal==r.itemSubTotal?e+="<div class='minicart-right-cell'>":e+="<div class='minicart-right-cell minicart-strikethrough'>",e+=localizedStrings.LIST_PRICE+":&nbsp;"+r.listPriceTotal,e+="</div><br>",e+="<div class='minicart-right-cell'>",e+=localizedStrings.YOUR_PRICE+":&nbsp;"+r.itemSubTotal,e+="</div>"),"ORDERABLE"==r.priceAccess&&miniCart.isAnonymous&&(e+="<div class='minicart-right-cell'>",e+=localizedStrings.LIST_PRICE+":&nbsp;"+r.listPriceTotal,e+="</div>"),"CONTACTUS"==r.priceAccess&&(e+="<div class='minicart-right-cell'>",e+="<a class='minicart-product-link' href='"+r.priceAccessLink+"'>",e+=localizedStrings.CONTACT_US,e+="</a>",e+="</div>"),"RFQ"==r.priceAccess&&(e+="<div class='minicart-right-cell'>",e+="<a class='minicart-product-link' href='"+r.priceAccessLink+"'>",e+=localizedStrings.RFQ,e+="</a>",e+="</div>"),"LearnWhereToBuy"==r.priceAccess&&(e+="<div class='minicart-right-cell'>",e+="<a class='minicart-product-link' href='"+r.priceAccessLink+"'>",e+=localizedStrings.LEARN_WHERE_TO_BUY,e+="</a>",e+="</div>"),"No Price"==r.priceAccess&&(e+="<div class='minicart-right-cell'>",e+=localizedStrings.LIST_PRICE+":***",e+="</div>"),"PVNO"==r.priceAccess&&(e+="<div class='minicart-right-cell'>",e+=localizedStrings.LIST_PRICE+":&nbsp;"+r.listPriceTotal,e+="</div>",e+="<div class='minicart-right-cell'>",e+="<a class='minicart-product-link' href='"+r.priceAccessLink+"'>",e+="&nbsp;("+localizedStrings.CONTACT_US+")",e+="</a>",e+="</div>"),"DSVP"==r.priceAccess&&(e+="<div class='minicart-right-cell'>",e+="<a class='minicart-product-link' href='"+r.priceAccessLink+"'>",e+=localizedStrings.SIGN_IN,e+="</a>",e+="</div>"),e+="</div>"}t.html(e)},MiniCart.prototype.updateItemCountInHeader=function(t){var i=$("#miniCartHeaderTotalItems"),e=i.parent().find(".icon");if(t)this.totalQuantity=t;else if(!this.loaded){var a=getCookie("MiniCartTotalItems");if(!a||0==a)return i.html(""),e.addClass("cart-icon-empty").removeClass("cart-icon-full"),setTimeout(delayLoadCart,0),!1;miniCart.totalQuantity=a}var n=this.totalItems();n>0?(e.removeClass("cart-icon-empty"),i.removeClass("hidden").addClass("cart-items-number"),n>9999?(i.html(9999),e.addClass("cart-icon-full"),i.addClass("cart-items-number").removeClass("hidden")):(i.html(n),e.removeClass("cart-icon-full"))):(i.html(""),e.removeClass("cart-icon-full"),e.addClass("cart-icon-empty"),i.addClass("hidden").removeClass("cart-items-number"))},MiniCart.prototype.resetDisplay=function(){this.loaded=!1,this.totalQuantity=0,$("#miniCart").hide(),this.updateItemCountInHeader()},MiniCart.prototype.getIsB2B=function(){var t=_lt.user.displayType;return-1!=t.indexOf("b2b")&&-1!=t.indexOf("cmgt")},MiniCart.prototype.getDisplayType=function(){return _lt.user.getInfo("displayType",!1)},MiniCart.prototype.getIsLoggedIn=function(){return _lt.user.isLoggedIn},MiniCart.prototype.finalizeAddItem=function(t){this.finalizeAddItemInternal(t,!1)},MiniCart.prototype.finalizeAddItemNoPopup=function(t){this.finalizeAddItemInternal(t,!0)},MiniCart.prototype.finalizeAddItemInternal=function(t,i){this.JSONToMiniCart(t),this.updateItemCountInHeader(),this.clearQuantities(),i||(this.hideStatus(),setTimeout("miniCart.showCart(true);",250)),this.executeAddToCartSuccessCallback(t)},MiniCart.prototype.finalizeRemoveItem=function(t){this.JSONToMiniCart(t),this.updateItemCountInHeader(),this.hideStatus(),this.toggleOverlay(),this.totalItems()<1&&!this.hasError?this.hideCart():setTimeout("miniCart.showCart(true);",250)},MiniCart.prototype.goCheckout=function(t){var i=this.generateCheckoutLink();if(i){this.showStatus("loading");new Ominiture;setTimeout(function(){document.location=i},500)}else!1!==t&&(this.setLoadCartSuccessCallback(function(){this.goCheckout(!1)}),this.loadCart())},MiniCart.prototype.generateCheckoutLink=function(){return document.location.origin+"/store/cart"},MiniCart.prototype.setCartKey=function(t){t&&(this.cartKey=t,this.isAnonymous?$("#manageCartLink").attr("href",environmentURL.COMERGENTSERVERSECURE+localizedLink.ANONYMOUS_MANAGE_CART_LINK+t):this.getIsB2B()?$("#manageCartLink").attr("href",environmentURL.COMERGENTSERVERSECURE+localizedLink.B2B_MANAGE_CART_LINK+t):$("#manageCartLink").attr("href",environmentURL.COMERGENTSERVERSECURE+localizedLink.LOGGED_IN_MANAGE_CART_LINK+t),$("#checkOutLink").attr("href",this.generateCheckoutLink()))},MiniCart.prototype.clearQuantities=function(){$("form[name=productForm] input, form[name=csform0] input").each(function(){nameExists(this,"qty")&&!isICard(this)&&hasValue(this)&&(this.value="")}),miniCart.itemLine=[]},MiniCart.prototype.getFullEditUrl=function(t){},MiniCart.prototype.getProductDetailUrl=function(t){},MiniCart.prototype.getFormValues=function(t,i){var e="productForm";null!=t&&""!=t&&(e=t);var a,n,r,s,o,l,c,d,u,m,h=!1,p=0,f=0,g=0,v=new Ominiture;v.additionalOmniParameters=i;var C,S="",y="",b="";$("#"+e+" input").each(function(t){nameExists(this,"qty")&&(u=0,this.value>0&&this.value%1==0?(g=this.value,p++,h=!0):""!=this.value&&f++),1==h&&(u++,a=nameExists(this,"sku")?this.value:a,s=nameExists(this,"size")?this.value:s,r=nameExists(this,"description")?this.value:r,n=nameExists(this,"price")?this.value:n,o=nameExists(this,"assayID")?this.value:o,l=nameExists(this,"assayName")?this.value:l,c=nameExists(this,"purity")?this.value:c,d=nameExists(this,"scale")?this.value:d,u%10==9&&1!=u&&(isValidQuantity(g)||""==g?""!=g&&(miniCart.addLineKey(a,g,r,n,s,o,l,c,d,"","","","","",""),v.addProduct(a,n,g,o)):errorSkus+=a+",",g="",a="",n="",r="",s="",o="",l="",c="",d="",h=!1))});var T=0,M=!1;if($("#"+e+" .ddsubscription , #"+e+" .cbsubscription").each(function(t,i){g="1",M=!0,$(this).hasClass("cbsubscription")&&$(this).is(":checked")&&nameExists(this,"addOnProductGroup")?(T++,m=$(this).attr("rate-plan-id"),C=$(this).attr("rate-plan-charge-id"),S=$(this).attr("rate-plan-name"),b=$(this).attr("rate-plan-billing-period"),y=$(this).attr("base-sku-name"),a=$(this).attr("sku-name"),miniCart.addLineKey(a,g,r,n,s,o,l,c,d,m,S,C,void 0,y,b,T,1),v.addProduct(a,n,g,o)):$(this).hasClass("ddsubscription")&&$("option:selected",this).length>0&&(T++,m=nameExists(this,"Subscription")?$("option:selected",this).attr("rate-plan-id"):m,C=nameExists(this,"Subscription")?$("option:selected",this).attr("rate-plan-charge-id"):C,S=nameExists(this,"Subscription")?$("option:selected",this).attr("rate-plan-name"):S,b=nameExists(this,"Subscription")?$("option:selected",this).attr("rate-plan-billing-period"):b,a=$(this).attr("sku-name"),miniCart.addLineKey(a,g,r,n,s,o,l,c,d,m,S,C,void 0,y,b,T),v.addProduct(a,n,g,o)),g="",a="",n="",r="",s="",o="",l="",c="",d="",m="",S="",C="",b=""}),M||p>0&&0==f){$("#"+e);return v.cleanEndOfString(),!0}var I=$("<span>"+localizedStrings.MINICART_ERROR_2+"</span>").text();return alert(I),!1},MiniCart.prototype.addAndCheckOutCart=function(t){var i="";if(null!=t&&""!=t&&(i=t),this.getFormValues(i)){this.initiateAddItem();var e=miniCart.MiniCartToJSON("","ADD"),a=this.createRequestURL("AddToCart","miniCart.scmsCheckout",miniCart.jsessionid,miniCart.cartKey);a+="&JSONObject="+encodeURIComponent(e),miniCart.requestJSON(a)}},MiniCart.prototype.addAndCheckOutCartAjax=function(t,i){miniCart.addToCartAjax(t,"miniCart.scmsCheckout")},MiniCart.prototype.scmsCheckout=function(t){miniCart.JSONToMiniCart(t),this.updateItemCountInHeader(),miniCart.clearQuantities(),this.hideStatus(),setTimeout("miniCart.showCart(true);",250),this.totalItems()>0&&!this.hasError?window.location.href=environmentURL.COMERGENTSERVERSECURE+localizedLink.LIGGED_IN_CHECKOUT_LINK+miniCart.cartKey:miniCart.hasError&&(miniCart.hideCart(),miniCart.showCart())},$(document).ready(function(){identifyMinicartVersion(function(){init()})});var _localStorageKeyPrefix="newCartLastCheck";function init(){console.log("NEW MINICART"),instantiateNewMinicart(function(){setTimeout(function(){assignMiniCartClickEventHandler()},200)})}function identifyMinicartVersion(t){waitForLocalStorageKey(function(i){var e=(new Date).getTime(),a=0;window.localStorage&&window.localStorage.getItem&&(a=parseFloat(window.localStorage.getItem(i))||a);var n=function(){t&&t()},r=function(){if(window.localStorage&&window.localStorage.setItem){for(var t in window.localStorage)t&&t.indexOf&&0==t.indexOf(_localStorageKeyPrefix)&&window.localStorage.removeItem(t);window.localStorage.setItem(i,e),setCookie("isCartRefreshed",!1)}};e-a<9e5?n():$.ajax({url:"/api/store/cart-migration",type:"GET",contentType:"application/json",processData:!1,success:function(t){t&&t.apiStatus&&t.data&&r(),n()},error:function(){r(),n()}})})}function waitForLocalStorageKey(t,i){i=i||0,i++,console.log("GET USER KEY: Attempt - "+i);var e=null,a=getCookie("identity_uid"),n=getCookie("CK_ISO_CODE")||"us";if(_lt&&_lt.user&&_lt.user.userkey?e=_localStorageKeyPrefix+"_"+n+"_"+_lt.user.userkey+"_"+(_lt.user.effectiveUserKey||""):a||(e=_localStorageKeyPrefix+"_"+n+"_anonymous"),e)t&&(console.log("All good - "+e),t(e));else{if(!(i<6))throw"Made 5 attempts to capture userKey";console.log("Waiting for storage key"),setTimeout(function(){waitForLocalStorageKey(t,i)},200)}}function assignMiniCartClickEventHandler(){var t=$("#miniCartButton"),i=$("#viewMiniCart");t.bind("mouseenter",function(t){return miniCart.visible||(miniCart.showCart(!0),miniCart.visible=!0),t.preventDefault(),!1}).bind("mouseleave",function(){miniCart.hideCart()}),i.bind("touchstart",function(t){return miniCart.visible?(hideOpenHeaderPanels(),miniCart.hideCart()):miniCart.showCart(!0),t.preventDefault(),!1}).bind("touchstop",function(t){return t.preventDefault(),!1}).bind("click",function(){return miniCart.goCheckout(),!1}),$(document).bind("click",function(t){t&&t.target&&t.target.tagName&&"div"==String(t.target.tagName).toLowerCase()&&miniCart.hideCart()})}function instantiateNewMinicart(t){console.log("Instantiating NEW minicart"),checkAndLoadAngularIfNeeded(t)}function instantiateNewMinicartCss(t){var i=document.head,e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,i.appendChild(e)}function checkAndLoadAngularIfNeeded(t){console.log("Check angular"),$(document).ready(function(){var i=window.minicartLoadTimeout?window.minicartLoadTimeout:1500;setTimeout(function(){window.angular?(console.log("Angular loaded"),_lt.loadScript("/store/cartlet/scripts/minicart.js").then(function(){t&&t()}),instantiateNewMinicartCss("/store/cartlet/styles/cartlet.css")):(console.log("Loading angular"),/MSIE \d|Trident.*rv:/.test(navigator.userAgent)?loadJSForIEOldJquery("/shared-static/scripts/angular.1.1.5.js").then(function(){console.log("Angular is loaded in IE"),loadJSForIEOldJquery("/store/cartlet/scripts/minicart.js").then(function(){console.log("MiniCart is loaded in IE"),t&&t(),instantiateNewMinicartCss("/store/cartlet/styles/cartlet.css")})}):loadJS("/shared-static/scripts/angular.1.1.5.js").then(function(){console.log("Angular is loaded"),loadJS("/store/cartlet/scripts/minicart.js").then(function(){t&&t()})}).then(function(){console.log("MiniCart is loaded"),t&&t(),instantiateNewMinicartCss("/store/cartlet/styles/cartlet.css")}))},i)})}function loadJS(t){if("function"==typeof Promise)return new Promise(function(i,e){var a=document.createElement("script");a.type="text/javascript",a.onload=i,a.onerror=e,a.src=t,document.body.appendChild(a)})}function loadJSForIEOldJquery(t){var i,e,a={then:function(t,a){i=t,e=a}},n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.onload=function(t){i&&i(t)},n.onerror=function(t){e&&e(t)},n.src=t,document.body.appendChild(n),a}window.minicartTemplates={},window.minicartTemplates["miniCart.html"]='\x3c!-- this file is inserted into the distributed source code during run time, during which comments and whitespace is automatically removed --\x3e<div id="miniCartPositioner"><div id="miniCart" class="minicart active"><div id="minicart-wrapper"><div id="minicart-right"><div id="minicart-mobile-toggle" class="header-icon-toggle" mc-omni-action="mobile|close"></div><div id="minicart-summary-header"><strong></strong></div><div id="minicart-summary-content"><div class="minicart-row" id="minicart-subtotal"><div class="minicart-left-cell"></div><div class="minicart-right-cell"></div></div><div class="minicart-row" id="minicart-your-price"><div class="minicart-left-cell"></div><div class="minicart-right-cell"></div></div></div><hr><a class="commerce-button btn-commerce minicart-button" id="minicart-checkout-button" mc-omni-action="View cart & checkout"></a></div>\x3c!-- end minicart right --\x3e<div id="minicart-left"><div id="minicart-header"><strong><span id="minicart-added-prefix"></span><span id="minicart-cart-name"></span><span id="minicart-added-suffix"></span></strong>&nbsp;<span id="minicart-change-link"></span></div><div id="minicart-items"><div class="minicart-row" id="minicart-items-header"><div class="minicart-left-cell"><strong></strong></div><div class="minicart-middle-cell"><strong></strong></div><div class="minicart-right-cell"><strong></strong></div></div><div id="minicart-error-message" class="minicart-error alert alert-error error-alert" style="display: none;"></div><div id="minicart-items-rows"></div></div></div>\x3c!-- end minicart left --\x3e<div id="minicart-spinner" class="mini-cart-spinner"><div class="minicart-spinner-container"><img alt="..." src="/shared-static/images/global/animeloader.gif"><span id="minicart-spinner-string" style="display:block;"></span></div></div></div>\x3c!-- end minicart wrapper --\x3e</div>\x3c!-- end minicart --\x3e</div>\x3c!-- end minicart positioner --\x3e',window.minicartTemplates["newMiniCart.html"]='\x3c!-- this file is inserted into the distributed source code during run time, during which comments and whitespace is automatically removed --\x3e<div id="miniCartPositioner"><div id="miniCart" class="minicart active"><div id="minicart-wrapper"><div class="new-minicart-right">\x3c!-- start minicart right --\x3e<div id="minicart-summary-header"><strong></strong></div><div class="new-minicart-summary" id="minicart-summary-content"><div class="minicart-left-cell minicart-subtotal"></div><div class="minicart-right-cell minicart-price-details"><span class="minicart-currency"></span><span class="minicart-price"></span><span class="minicart-sign-in"></span></div></div><a class="btn btn-featured view-cart" id="new-minicart-checkout-button"></a></div>\x3c!-- end minicart right --\x3e<div id="minicart-left"><div id="minicart-header"><strong><span id="minicart-added-prefix"></span><span id="minicart-cart-name"></span><span id="minicart-added-suffix"></span></strong>&nbsp;<span id="minicart-change-link"></span></div><div id="minicart-items"><div class="minicart-row" id="minicart-items-header"><div class="minicart-left-cell"><strong></strong></div><div class="minicart-middle-cell"><strong></strong></div><div class="minicart-right-cell"><strong></strong></div></div><div id="minicart-items-rows"></div></div></div><div id="minicart-spinner" class="mini-cart-spinner"><div class="minicart-spinner-container"><img alt="..." src="/shared-static/images/global/animeloader.gif"><span id="minicart-spinner-string" style="display:block;"></span></div></div></div>\x3c!-- end minicart wrapper --\x3e</div>\x3c!-- end minicart --\x3e</div>\x3c!-- end minicart positioner --\x3e',function(t,i){"use strict";var e={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:"",mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:400,auto:!1,pauseOnHover:!1,loop:!1,slideEndAnimation:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:"",nextHtml:"",rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:"middle",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:40,responsive:[],onBeforeStart:function(t){},onSliderLoad:function(t){},onBeforeSlide:function(t,i){},onAfterSlide:function(t,i){},onBeforeNextSlide:function(t,i){},onBeforePrevSlide:function(t,i){}};t.fn.lightSlider=function(i){if(0===this.length)return this;if(this.length>1)return this.each(function(){t(this).lightSlider(i)}),this;var a={},n=t.extend(!0,{},e,i),r={},s=this;a.$el=this,"fade"===n.mode&&(n.vertical=!1);var o=s.children(),l=t(window).width(),c=null,d=0,u=0,m=!1,h=0,p="",f=0,g=!0===n.vertical?"height":"width",v=!0===n.vertical?"margin-bottom":"margin-right",C=0,S=0,y=0,b=0,T=null,M="ontouchstart"in document.documentElement,I={chbreakpoint:function(){if(l=t(window).width(),n.responsive.length){var i;if(!1===n.autoWidth&&(i=n.item),l<n.responsive[0].breakpoint)for(var e=0;e<n.responsive.length;e++)l<n.responsive[e].breakpoint&&(n.responsive[e].breakpoint,c=n.responsive[e]);if(null!=c)for(var a in c.settings)c.settings.hasOwnProperty(a)&&(void 0!==r[a]&&null!==r[a]||(r[a]=n[a]),n[a]=c.settings[a]);if(!t.isEmptyObject(r)&&l>n.responsive[0].breakpoint)for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s]);!1===n.autoWidth&&C>0&&y>0&&i!==n.item&&(f=Math.round(C/((y+n.slideMargin)*n.slideMove)))}},calSW:function(){!1===n.autoWidth&&(y=(h-(n.item*n.slideMargin-n.slideMargin))/n.item)},calWidth:function(t){var i=!0===t?p.find(".lslide").length:o.length;if(!1===n.autoWidth)u=i*(y+n.slideMargin);else{u=0;for(var e=0;e<i;e++)u+=parseInt(o.eq(e).width())+n.slideMargin}return u}};return(a={doCss:function(){return!(!n.useCSS||!function(){for(var t=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],i=document.documentElement,e=0;e<t.length;e++)if(t[e]in i.style)return!0}())},keyPress:function(){n.keyPress&&t(document).on("keyup.lightslider",function(i){t(":focus").is("input, textarea")||(i.preventDefault?i.preventDefault():i.returnValue=!1,37===i.keyCode?s.goToPrevSlide():39===i.keyCode&&s.goToNextSlide())})},controls:function(){n.controls&&(s.after('<div class="lSAction"><a class="lSPrev">'+n.prevHtml+'</a><a class="lSNext">'+n.nextHtml+"</a></div>"),n.autoWidth?I.calWidth(!1)<h&&p.find(".lSAction").hide():d<=n.item&&p.find(".lSAction").hide(),p.find(".lSAction a").on("click",function(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,"lSPrev"===t(this).attr("class")?s.goToPrevSlide():s.goToNextSlide(),!1}))},initialStyle:function(){var t=this;"fade"===n.mode&&(n.autoWidth=!1,n.slideEndAnimation=!1),n.auto&&(n.slideEndAnimation=!1),n.autoWidth&&(n.slideMove=1,n.item=1),n.loop&&(n.slideMove=1,n.freeMove=!1),n.onBeforeStart.call(this,s),I.chbreakpoint(),s.addClass("lightSlider").wrap('<div class="lSSlideOuter '+n.addClass+'"><div class="lSSlideWrapper"></div></div>'),p=s.parent(".lSSlideWrapper"),!0===n.rtl&&p.parent().addClass("lSrtl"),n.vertical?(p.parent().addClass("vertical"),h=n.verticalHeight,p.css("height",h+"px")):h=s.outerWidth(),o.addClass("lslide"),!0===n.loop&&"slide"===n.mode&&(I.calSW(),I.clone=function(){if(I.calWidth(!0)>h){for(var i=0,e=0,a=0;a<o.length&&(e++,!((i+=parseInt(s.find(".lslide").eq(a).width())+n.slideMargin)>=h+n.slideMargin));a++);var r=!0===n.autoWidth?e:n.item;if(r<s.find(".clone.left").length)for(var l=0;l<s.find(".clone.left").length-r;l++)o.eq(l).remove();if(r<s.find(".clone.right").length)for(var c=o.length-1;c>o.length-1-s.find(".clone.right").length;c--)f--,o.eq(c).remove();for(var d=s.find(".clone.right").length;d<r;d++)s.find(".lslide").eq(d).clone().removeClass("lslide").addClass("clone right").appendTo(s),f++;for(var u=s.find(".lslide").length-s.find(".clone.left").length;u>s.find(".lslide").length-r;u--)s.find(".lslide").eq(u-1).clone().removeClass("lslide").addClass("clone left").prependTo(s);o=s.children()}else o.hasClass("clone")&&(s.find(".clone").remove(),t.move(s,0))},I.clone()),I.sSW=function(){d=o.length,!0===n.rtl&&!1===n.vertical&&(v="margin-left"),!1===n.autoWidth&&o.css(g,y+"px"),o.css(v,n.slideMargin+"px"),u=I.calWidth(!1),s.css(g,u+"px"),!0===n.loop&&"slide"===n.mode&&!1===m&&(f=s.find(".clone.left").length)},I.calL=function(){o=s.children(),d=o.length},this.doCss()&&p.addClass("usingCss"),I.calL(),"slide"===n.mode?(I.calSW(),I.sSW(),!0===n.loop&&(C=t.slideValue(),this.move(s,C)),!1===n.vertical&&this.setHeight(s,!1)):(this.setHeight(s,!0),s.addClass("lSFade"),this.doCss()||(o.fadeOut(0),o.eq(f).fadeIn(0))),!0===n.loop&&"slide"===n.mode?o.eq(f).addClass("active"):o.first().addClass("active")},pager:function(){var t=this;if(I.createPager=function(){b=(h-(n.thumbItem*n.thumbMargin-n.thumbMargin))/n.thumbItem;var i=p.find(".lslide"),e=p.find(".lslide").length,a=0,r="",o=0;for(a=0;a<e;a++){"slide"===n.mode&&(n.autoWidth?o+=(parseInt(i.eq(a).width())+n.slideMargin)*n.slideMove:o=a*((y+n.slideMargin)*n.slideMove));var l=i.eq(a*n.slideMove).attr("data-thumb");if(!0===n.gallery?r+='<li style="width:100%;'+g+":"+b+"px;"+v+":"+n.thumbMargin+'px"><a href="#"><img src="'+l+'" /></a></li>':r+='<li><a href="#">'+(a+1)+"</a></li>","slide"===n.mode&&o>=u-h-n.slideMargin){a+=1;var c=2;n.autoWidth&&(r+='<li><a href="#">'+(a+1)+"</a></li>",c=1),a<c?(r=null,p.parent().addClass("noPager")):p.parent().removeClass("noPager");break}}var d=p.parent();d.find(".lSPager").html(r),!0===n.gallery&&(!0===n.vertical&&d.find(".lSPager").css("width",n.vThumbWidth+"px"),S=a*(n.thumbMargin+b)+.5,d.find(".lSPager").css({property:S+"px","transition-duration":n.speed+"ms"}),!0===n.vertical&&p.parent().css("padding-right",n.vThumbWidth+n.galleryMargin+"px"),d.find(".lSPager").css(g,S+"px"));var m=d.find(".lSPager").find("li");m.first().addClass("active"),m.on("click",function(){return!0===n.loop&&"slide"===n.mode?f+=m.index(this)-d.find(".lSPager").find("li.active").index():f=m.index(this),s.mode(!1),!0===n.gallery&&t.slideThumb(),!1})},n.pager){var i="lSpg";n.gallery&&(i="lSGallery"),p.after('<ul class="lSPager '+i+'"></ul>');var e=n.vertical?"margin-left":"margin-top";p.parent().find(".lSPager").css(e,n.galleryMargin+"px"),I.createPager()}setTimeout(function(){I.init()},0)},setHeight:function(t,i){var e=null,a=this;e=n.loop?t.children(".lslide ").first():t.children().first();var r=function(){var a=e.outerHeight(),n=0,r=a;i&&(a=0,n=100*r/h),t.css({height:a+"px","padding-bottom":n+"%"})};r(),e.find("img").length?e.find("img")[0].complete?(r(),T||a.auto()):e.find("img").load(function(){setTimeout(function(){r(),T||a.auto()},100)}):T||a.auto()},active:function(t,i){this.doCss()&&"fade"===n.mode&&p.addClass("on");var e,a,r=0;f*n.slideMove<d?(t.removeClass("active"),this.doCss()||"fade"!==n.mode||!1!==i||t.fadeOut(n.speed),r=!0===i?f:f*n.slideMove,!0===i&&(a=(e=t.length)-1,r+1>=e&&(r=a)),!0===n.loop&&"slide"===n.mode&&(r=!0===i?f-s.find(".clone.left").length:f*n.slideMove,!0===i&&(a=(e=t.length)-1,r+1===e?r=a:r+1>e&&(r=0))),this.doCss()||"fade"!==n.mode||!1!==i||t.eq(r).fadeIn(n.speed),t.eq(r).addClass("active")):(t.removeClass("active"),t.eq(t.length-1).addClass("active"),this.doCss()||"fade"!==n.mode||!1!==i||(t.fadeOut(n.speed),t.eq(r).fadeIn(n.speed)))},move:function(t,i){!0===n.rtl&&(i=-i),this.doCss()?!0===n.vertical?t.css({transform:"translate3d(0px, "+-i+"px, 0px)","-webkit-transform":"translate3d(0px, "+-i+"px, 0px)"}):t.css({transform:"translate3d("+-i+"px, 0px, 0px)","-webkit-transform":"translate3d("+-i+"px, 0px, 0px)"}):!0===n.vertical?t.css("position","relative").animate({top:-i+"px"},n.speed,n.easing):t.css("position","relative").animate({left:-i+"px"},n.speed,n.easing);var e=p.parent().find(".lSPager").find("li");this.active(e,!0)},fade:function(){this.active(o,!1);var t=p.parent().find(".lSPager").find("li");this.active(t,!0)},slide:function(){var t=this;I.calSlide=function(){u>h&&(C=t.slideValue(),t.active(o,!1),C>u-h-n.slideMargin?C=u-h-n.slideMargin:C<0&&(C=0),t.move(s,C),!0===n.loop&&"slide"===n.mode&&(f>=d-s.find(".clone.left").length/n.slideMove&&t.resetSlide(s.find(".clone.left").length),0===f&&t.resetSlide(p.find(".lslide").length)))},I.calSlide()},resetSlide:function(t){var i=this;p.find(".lSAction a").addClass("disabled"),setTimeout(function(){f=t,p.css("transition-duration","0ms"),C=i.slideValue(),i.active(o,!1),a.move(s,C),setTimeout(function(){p.css("transition-duration",n.speed+"ms"),p.find(".lSAction a").removeClass("disabled")},50)},n.speed+100)},slideValue:function(){var t=0;if(!1===n.autoWidth)t=f*((y+n.slideMargin)*n.slideMove);else{t=0;for(var i=0;i<f;i++)t+=parseInt(o.eq(i).width())+n.slideMargin}return t},slideThumb:function(){var t;switch(n.currentPagerPosition){case"left":t=0;break;case"middle":t=h/2-b/2;break;case"right":t=h-b}var i=f-s.find(".clone.left").length,e=p.parent().find(".lSPager");"slide"===n.mode&&!0===n.loop&&(i>=e.children().length?i=0:i<0&&(i=e.children().length));var a=i*(b+n.thumbMargin)-t;a+h>S&&(a=S-h-n.thumbMargin),a<0&&(a=0),this.move(e,a)},auto:function(){n.auto&&(clearInterval(T),T=setInterval(function(){s.goToNextSlide()},n.pause))},pauseOnHover:function(){var i=this;n.auto&&n.pauseOnHover&&(p.on("mouseenter",function(){t(this).addClass("ls-hover"),s.pause(),n.auto=!0}),p.on("mouseleave",function(){t(this).removeClass("ls-hover"),p.find(".lightSlider").hasClass("lsGrabbing")||i.auto()}))},touchMove:function(t,i){if(p.css("transition-duration","0ms"),"slide"===n.mode){var e=C-(t-i);if(e>=u-h-n.slideMargin)if(!1===n.freeMove)e=u-h-n.slideMargin;else{var a=u-h-n.slideMargin;e=a+(e-a)/5}else e<0&&(!1===n.freeMove?e=0:e/=5);this.move(s,e)}},touchEnd:function(t){if(p.css("transition-duration",n.speed+"ms"),"slide"===n.mode){var i=!1,e=!0;(C-=t)>u-h-n.slideMargin?(C=u-h-n.slideMargin,!1===n.autoWidth&&(i=!0)):C<0&&(C=0);var a=function(t){var e=0;if(i||t&&(e=1),n.autoWidth)for(var a=0,r=0;r<o.length&&(a+=parseInt(o.eq(r).width())+n.slideMargin,f=r+e,!(a>=C));r++);else{var s=C/((y+n.slideMargin)*n.slideMove);f=parseInt(s)+e,C>=u-h-n.slideMargin&&s%1!=0&&f++}};t>=n.swipeThreshold?(a(!1),e=!1):t<=-n.swipeThreshold&&(a(!0),e=!1),s.mode(e),this.slideThumb()}else t>=n.swipeThreshold?s.goToPrevSlide():t<=-n.swipeThreshold&&s.goToNextSlide()},enableDrag:function(){var i=this;if(!M){var e=0,a=0,r=!1;p.find(".lightSlider").addClass("lsGrab"),p.on("mousedown",function(i){if(u<h&&0!==u)return!1;"lSPrev"!==t(i.target).attr("class")&&"lSNext"!==t(i.target).attr("class")&&(e=!0===n.vertical?i.pageY:i.pageX,r=!0,i.preventDefault?i.preventDefault():i.returnValue=!1,p.scrollLeft+=1,p.scrollLeft-=1,p.find(".lightSlider").removeClass("lsGrab").addClass("lsGrabbing"),clearInterval(T))}),t(window).on("mousemove",function(t){r&&(a=!0===n.vertical?t.pageY:t.pageX,i.touchMove(a,e))}),t(window).on("mouseup",function(s){if(r){p.find(".lightSlider").removeClass("lsGrabbing").addClass("lsGrab"),r=!1;var o=(a=!0===n.vertical?s.pageY:s.pageX)-e;Math.abs(o)>=n.swipeThreshold&&t(window).on("click.ls",function(i){i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopImmediatePropagation(),i.stopPropagation(),t(window).off("click.ls")}),i.touchEnd(o)}})}},enableTouch:function(){var t=this;if(M){var i={},e={};p.on("touchstart",function(t){e=t.originalEvent.targetTouches[0],i.pageX=t.originalEvent.targetTouches[0].pageX,i.pageY=t.originalEvent.targetTouches[0].pageY,clearInterval(T)}),p.on("touchmove",function(a){if(u<h&&0!==u)return!1;var r=a.originalEvent;e=r.targetTouches[0];var s=Math.abs(e.pageX-i.pageX),o=Math.abs(e.pageY-i.pageY);!0===n.vertical?(3*o>s&&a.preventDefault(),t.touchMove(e.pageY,i.pageY)):(3*s>o&&a.preventDefault(),t.touchMove(e.pageX,i.pageX))}),p.on("touchend",function(){if(u<h&&0!==u)return!1;var a;a=!0===n.vertical?e.pageY-i.pageY:e.pageX-i.pageX,t.touchEnd(a)})}},build:function(){var i=this;i.initialStyle(),this.doCss()&&(!0===n.enableTouch&&i.enableTouch(),!0===n.enableDrag&&i.enableDrag()),t(window).on("focus",function(){i.auto()}),t(window).on("blur",function(){clearInterval(T)}),i.pager(),i.pauseOnHover(),i.controls(),i.keyPress()}}).build(),I.init=function(){I.chbreakpoint(),!0===n.vertical?(h=n.item>1?n.verticalHeight:o.outerHeight(),p.css("height",h+"px")):h=p.outerWidth(),!0===n.loop&&"slide"===n.mode&&I.clone(),I.calL(),"slide"===n.mode&&s.removeClass("lSSlide"),"slide"===n.mode&&(I.calSW(),I.sSW()),setTimeout(function(){"slide"===n.mode&&s.addClass("lSSlide")},1e3),n.pager&&I.createPager(),!0===n.adaptiveHeight&&!1===n.vertical&&s.css("height",o.eq(f).outerHeight(!0)),!1===n.adaptiveHeight&&("slide"===n.mode?!1===n.vertical?a.setHeight(s,!1):a.auto():a.setHeight(s,!0)),!0===n.gallery&&a.slideThumb(),"slide"===n.mode&&a.slide(),!1===n.autoWidth?o.length<=n.item?p.find(".lSAction").hide():p.find(".lSAction").show():I.calWidth(!1)<h&&0!==u?p.find(".lSAction").hide():p.find(".lSAction").show()},s.goToPrevSlide=function(){if(f>0)n.onBeforePrevSlide.call(this,s,f),f--,s.mode(!1),!0===n.gallery&&a.slideThumb();else if(!0===n.loop){if(n.onBeforePrevSlide.call(this,s,f),"fade"===n.mode)f=parseInt((d-1)/n.slideMove);s.mode(!1),!0===n.gallery&&a.slideThumb()}else!0===n.slideEndAnimation&&(s.addClass("leftEnd"),setTimeout(function(){s.removeClass("leftEnd")},400))},s.goToNextSlide=function(){var t=!0;"slide"===n.mode&&(t=a.slideValue()<u-h-n.slideMargin);f*n.slideMove<d-n.slideMove&&t?(n.onBeforeNextSlide.call(this,s,f),f++,s.mode(!1),!0===n.gallery&&a.slideThumb()):!0===n.loop?(n.onBeforeNextSlide.call(this,s,f),f=0,s.mode(!1),!0===n.gallery&&a.slideThumb()):!0===n.slideEndAnimation&&(s.addClass("rightEnd"),setTimeout(function(){s.removeClass("rightEnd")},400))},s.mode=function(t){!0===n.adaptiveHeight&&!1===n.vertical&&s.css("height",o.eq(f).outerHeight(!0)),!1===m&&("slide"===n.mode?a.doCss()&&(s.addClass("lSSlide"),""!==n.speed&&p.css("transition-duration",n.speed+"ms"),""!==n.cssEasing&&p.css("transition-timing-function",n.cssEasing)):a.doCss()&&(""!==n.speed&&s.css("transition-duration",n.speed+"ms"),""!==n.cssEasing&&s.css("transition-timing-function",n.cssEasing))),t||n.onBeforeSlide.call(this,s,f),"slide"===n.mode?a.slide():a.fade(),p.hasClass("ls-hover")||a.auto(),setTimeout(function(){t||n.onAfterSlide.call(this,s,f)},n.speed),m=!0},s.play=function(){s.goToNextSlide(),n.auto=!0,a.auto()},s.pause=function(){n.auto=!1,clearInterval(T)},s.refresh=function(){I.init()},s.getCurrentSlideCount=function(){var t=f;if(n.loop){var i=p.find(".lslide").length,e=s.find(".clone.left").length;t=f<=e-1?i+(f-e):f>=i+e?f-i-e:f-e}return t+1},s.getTotalSlideCount=function(){return p.find(".lslide").length},s.goToSlide=function(t){f=n.loop?t+s.find(".clone.left").length-1:t,s.mode(!1),!0===n.gallery&&a.slideThumb()},s.destroy=function(){s.lightSlider&&(s.goToPrevSlide=function(){},s.goToNextSlide=function(){},s.mode=function(){},s.play=function(){},s.pause=function(){},s.refresh=function(){},s.getCurrentSlideCount=function(){},s.getTotalSlideCount=function(){},s.goToSlide=function(){},s.lightSlider=null,I={init:function(){}},s.parent().parent().find(".lSAction, .lSPager").remove(),s.removeClass("lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right").removeAttr("style").unwrap().unwrap(),s.children().removeAttr("style"),o.removeClass("lslide active"),s.find(".clone").remove(),o=null,T=null,m=!1,f=0)},setTimeout(function(){n.onSliderLoad.call(this,s)},10),t(window).on("resize orientationchange",function(t){setTimeout(function(){t.preventDefault?t.preventDefault():t.returnValue=!1,I.init()},200)}),this}}(jQuery);