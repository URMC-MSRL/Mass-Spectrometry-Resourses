function setRefreshTokenTimer(){if(_lt.user.isLoggedIn&&"true"==getCookie("isGigyaEnabled")){var e=1e3*Math.floor(new Date/1e3),t=parseInt(getCookie("tokenExpiration")),o=t-e;o>0&&window.setTimeout(refreshTokenTimer,o),t<=e&&refreshTokenTimer()}}function refreshTokenTimer(){var e={refreshToken:getCookie("rToken"),scope:"openid profile email"},t=window.location.hostname.split(".")[1];refreshUserToken(e,requestURLS.oidcRefreshToken[t])}function refreshUserToken(e,t){var o=new XMLHttpRequest;o.withCredentials=!0,o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4===o.readyState&&(200===o.status?setRefreshTokenTimer():deleteCookie("tokenExpiration"))};var i=JSON.stringify(e);o.send(i)}function invokeOidcLogin(e){var t=window.location.hostname.split(".")[1],o=requestURLS.partnerLogin[t];e&&(o+="?returnUrl="+encodeURIComponent(e)),window.location.href=o}function invokeIdleSessionLogout(e){var t=window.location.hostname.split(".")[1],o=requestURLS.partnerLogout[t];o+="?OIDCRUrl="+encodeURIComponent(formRedirectUrl(idleSessionUrls.idleSessionReturnUrl[t])),window.location.href=o}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=o.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function formRedirectUrl(e){var t=encodeURIComponent(getParameterByName("redirect_uri",e)),o=encodeURIComponent(getParameterByName("scope",e)),i=encodeURIComponent(e.split("state=",2)[1]);return e=e.split("redirect_uri",2)[0]+"redirect_uri="+t+"&scope="+o+"&state="+i}function createB2BLoginIFrame(){var e=window.location.href,t=getCookie("gac_3_MdUAygy5UVqlKdsaLRZym6539xfyKYmfYHpWpN5Z_R_HSWbAv8i2ByqEnntrrcFH");if(-1==e.indexOf("lt?cmd=IVGNLiteUserUpdateData"))if(""!==t&&null!==t||_lt.user.isLoggedIn&&"true"==getCookie("ck_gtoken_check")){-1==window.location.href.indexOf("/customersite/schome.cfm")&&"inspect"!==getCookie("CK_B2B_MODE")&&(showSpinnerUntilJWT(),setTimeout(removeSpinner,2e4));var o=window.location.hostname.split(".")[1],i=document.getElementsByTagName("body")[0],n=requestURLS.envParams[o];isIEVersionLT9()?(localStorage.setItem("loginPopup","open"),b2bLoginPopup=window.open(n,"loginPopup","width=500, height=500,close=no,dialog=true"),setInterval(function(){"done"==localStorage.getItem("b2bLoginStatus")&&removeSpinner(),localStorage.removeItem("b2bLoginStatus")},1e3)):(iframe=document.createElement("iframe"),iframe.id="loginGigya",iframe.src=n,iframe.style.display="none",i.appendChild(iframe)),localStorage.setItem("Processcheck","started")}else deleteCookie("ck_gtoken_check","thermofisher")}function closeIframe(){var e=document.getElementById("loginGigya");document.getElementsByTagName("body")[0];e.parentNode.removeChild(e),removeSpinner(),deleteCookie("ck_gtoken_check","thermofisher"),setRefreshTokenTimer()}function deleteCookie(e,t){var o=window.location.hostname.split(".")[1];t="thermofisher"===t?"thermofisher.com;":o+".thermofisher.com;",document.cookie=e+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT; Secure; SameSite=None; domain=."+t}function showSpinnerUntilJWT(){var e=document.getElementsByTagName("body")[0],t=document.createElement("div");t.setAttribute("style","position: absolute;top: -41px;opacity: 0.7;margin-bottom: 0;width: 100% !important;text-align: center;margin: 40px auto;z-index: 1205;background-color: #fff;border: 1px solid rgba(0,0,0,0.1);box-shadow: 0 1px 2px rgba(0,0,0,0.3);background-clip: padding-box;outline: 0;-moz-background-clip: padding-box;"),t.style.height=document.body.offsetHeight+"px",window.innerWidth<767&&(t.style.marginLeft="-11px"),t.id="spinnerDiv";var o=document.createElement("span");o.setAttribute("style","margin: auto;display:block; margin-top:300px;background-image: url(https://www.thermofisher.com/etc/clientlibs/interact/img/loading-wheel-lg.gif);height: 48px;width: 48px;"),t.appendChild(o),e.appendChild(t)}function removeSpinner(){var e=document.getElementsByTagName("body")[0],t=document.getElementById("spinnerDiv");t&&e.removeChild(t)}function isIEVersionLT9(){var e=!1;return-1!=navigator.appVersion.indexOf("MSIE")&&parseInt(navigator.appVersion.split("MSIE ")[1].split(";")[0])<9&&(e=!0),e}function logout(e){if("true"!=getCookie("isGigyaEnabled")||isIEVersionLT9()){var t=window.location.host.replace("commerce","www"),o="https://"+t+"/account-center/closeSession.html";localStorage.setItem("logoutPopup","open"),window.open(o,"_blank","width=500, height=500,dialog=yes,close=no"),e()}else createIframe(),logoutListner(e)}function createIframe(){var e=window.location.host.replace("commerce","www"),t="https://"+e+"/account-center/closeSession.html",o=document.createElement("iframe");o.setAttribute("id","logoutGigya"),o.setAttribute("style","display:none;"),o.setAttribute("src",t),document.body.appendChild(o)}function logoutListner(e){var t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("attachEvent"===t?"onmessage":"message",function(t){0!==t.data&&0!==t.message||(console.log("iframe logout success"),e()),console.log(t)}),setTimeout(e,2e4)}function redirectOncomplete(e){location.href=e}var requestURLS={oidcRefreshToken:{localhost:"https://localhost:8443/api-gateway/identity-authorization/identity/auth/refresh-token",dev:"https://www.dev.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",dev2:"https://www.dev2.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",dev3:"https://www.dev3.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",qa:"https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",qa2:"https://www.qa2.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",qa3:"https://www.qa3.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",qa4:"https://www.qa4.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",qa5:"https://www.qa5.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",stage:"https://www.stage.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token",thermofisher:"https://www.thermofisher.com/api-gateway/identity-authorization/identity/auth/refresh-token"},envParams:{qa:"https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.qa.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D",qa4:"https://www.qa4.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=ApKGDoVCLbOQbJhn638fOUT-&redirect_uri=https://www.qa4.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.qa4.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D",qa3:"https://www.qa3.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.qa3.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D",qa5:"https://www.qa5.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.qa5.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D",stage:"https://www.stage.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=KQOXiy_bmk7SJ5acZ1v38IZc&redirect_uri=https://www.stage.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.state.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D",dev3:"https://www.dev3.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=eZc3CGSFO2-phATVvTvL_4tf&redirect_uri=https://www.dev3.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.dev3.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D",dev2:"https://www.dev2.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.dev2.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D",dev:"https://www.dev.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.dev.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D",thermofisher:"https://www.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=8e72dC_EtXlaxDf9EFBe7qu5&redirect_uri=https://www.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state=%7B%22u%22%3A%22https%3A%2F%2Fwww.thermofisher.com%2Faccount-center%2Fdirect-login.html%22%7D"},partnerLogin:{dev:"https://www.dev.thermofisher.com/auth/login",dev2:"https://www.dev2.thermofisher.com/auth/login",dev3:"https://www.dev3.thermofisher.com/auth/login",qa:"https://www.qa.thermofisher.com/auth/login",qa3:"https://www.qa3.thermofisher.com/auth/login",qa4:"https://www.qa4.thermofisher.com/auth/login",qa5:"https://www.qa5.thermofisher.com/auth/login",stage:"https://www.stage.thermofisher.com/auth/login",thermofisher:"https://www.thermofisher.com/auth/login"},partnerLogout:{dev:"https://www.dev.thermofisher.com/auth/logout",dev2:"https://www.dev2.thermofisher.com/auth/logout",dev3:"https://www.dev3.thermofisher.com/auth/logout",qa:"https://www.qa.thermofisher.com/auth/logout",qa3:"https://www.qa3.thermofisher.com/auth/logout",qa4:"https://www.qa4.thermofisher.com/auth/logout",qa5:"https://www.qa5.thermofisher.com/auth/logout",stage:"https://www.stage.thermofisher.com/auth/logout",thermofisher:"https://www.thermofisher.com/auth/logout"},sessionLoginRedirect:{localhost:'"https://www.localhost.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',dev:'"https://www.dev.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',dev2:'"https://www.dev2.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',dev3:'"https://www.dev3.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',qa:'"https://www.qa.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',qa2:'"https://www.qa2.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',qa3:'"https://www.qa3.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',qa4:'"https://www.qa4.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',qa5:'"https://www.qa5.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',stage:'"https://www.stage.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"',thermofisher:'"https://www.thermofisher.com/auth/login?returnUrl='+encodeURIComponent(window.location.href)+'"'}},idleSessionUrls={idleSessionReturnUrl:{qa:'https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.qa+"}&completion_mode=STANDARD",qa3:'https://www.qa3.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=lhbLJIwopigCYxcopSDV4t_l&redirect_uri=https://www.qa3.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.qa3+"}&completion_mode=STANDARD",qa4:'https://www.qa4.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=ApKGDoVCLbOQbJhn638fOUT-&redirect_uri=https://www.qa4.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.qa4+"}&completion_mode=STANDARD",qa5:'https://www.qa5.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.qa5+"}&completion_mode=STANDARD",stage:'https://www.stage.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=KQOXiy_bmk7SJ5acZ1v38IZc&redirect_uri=https://www.stage.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.stage+"}&completion_mode=STANDARD",dev:'https://www.dev.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.dev+"}&completion_mode=STANDARD",dev2:'https://www.dev2.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=-3KY8vAhFchFPgVj7n1Q4kqd&redirect_uri=https://www.qa.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.dev2+"}&completion_mode=STANDARD",dev3:'https://www.dev3.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=eZc3CGSFO2-phATVvTvL_4tf&redirect_uri=https://www.dev3.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.dev3+"}&completion_mode=STANDARD",thermofisher:'https://www.thermofisher.com/api-gateway/identity-authorization/identity/oidc/op/authorize?response_type=code&client_id=8e72dC_EtXlaxDf9EFBe7qu5&redirect_uri=https://www.thermofisher.com/api-gateway/identity-authorization/identity/auth/token&scope=openid profile email&state={"u":'+requestURLS.sessionLoginRedirect.thermofisher+"}&completion_mode=STANDARD"}};setRefreshTokenTimer(),document.addEventListener?document.addEventListener("DOMContentLoaded",createB2BLoginIFrame):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&createB2BLoginIFrame()}),$(document).ready(function(){if(document.getElementById("sessionExpiredWarning")){if("true"!=getCookie("isGigyaEnabled")||isIEVersionLT9()){var e=window.location.host.replace("commerce","www"),t="https://"+e+"/account-center/closeSession.html";localStorage.setItem("logoutPopup","open"),window.open(t,"_blank","width=500, height=500,dialog=yes,close=no")}else createIframe()}});